CREATE TABLE SYMBOL(
SYMBOL_ID BIGSERIAL,
NAME VARCHAR(256),
PRIMARY KEY (SYMBOL_ID)
);

CREATE TABLE ACCOUNT(
ACCOUNT_ID BIGINT,
BALANCE DOUBLE PRECISION,
PRIMARY KEY (ACCOUNT_ID)
);

CREATE TABLE POSITION(
POSITION_ID BIGSERIAL,
SYMBOL_ID BIGINT,
ACCOUNT_ID BIGINT,
AMOUNT DOUBLE PRECISION,
STATUS VARCHAR(256),
PRIMARY KEY (POSITION_ID),
FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ACCOUNT_ID) ON DELETE SET NULL ON UPDATE CASCADE,
FOREIGN KEY (SYMBOL_ID) REFERENCES SYMBOL (SYMBOL_ID) ON DELETE SET NULL ON UPDATE CASCADE
);

CREATE TABLE ORDERS(
ORDER_ID BIGSERIAL,
STATUS VARCHAR(256),
SYMBOL_ID BIGINT,
ACCOUNT_ID BIGINT,
AMOUNT DOUBLE PRECISION,
LIMIT_PRICE DOUBLE PRECISION,
PRIMARY KEY (ORDER_ID),
FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ACCOUNT_ID) ON DELETE SET NULL ON UPDATE CASCADE,
FOREIGN KEY (SYMBOL_ID) REFERENCES SYMBOL (SYMBOL_ID) ON DELETE SET NULL ON UPDATE CASCADE
);

CREATE TABLE EXCHANGE(
EXCHANGE_ID BIGSERIAL,
BUYER_ID BIGINT,
SELLER_ID BIGINT,
SYMBOL_ID BIGINT,
AMOUNT DOUBLE PRECISION,
PRICE DOUBLE PRECISION,
PRIMARY KEY (EXCHANGE_ID),
FOREIGN KEY (BUYER_ID) REFERENCES ACCOUNT (ACCOUNT_ID) ON DELETE SET NULL ON UPDATE CASCADE,
FOREIGN KEY (SELLER_ID) REFERENCES ACCOUNT (ACCOUNT_ID) ON DELETE SET NULL ON UPDATE CASCADE,
FOREIGN KEY (SYMBOL_ID) REFERENCES SYMBOL (SYMBOL_ID) ON DELETE SET NULL ON UPDATE CASCADE
);